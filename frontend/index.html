    <!DOCTYPE html>
    <html lang="en">
    <head>
    <meta charset="UTF-8">
    <title>Scatter DEMO</title>
    <script type="text/javascript" src="./js/eos.js"></script>
    <script type="text/javascript" src="http://www.bichlmeier.info/sha256.js"></script>
    </head>

    <body>

Hi this is Scatter Demo, Please see console logs.

</body>
    <script>
    document.addEventListener('scatterLoaded', scatterExtension => {


        const scatter = window.scatter;
        //防止别的网页应用 调用window.scatter 对象
        window.scatter = null;

        // If you want to require a specific version of Scatter
        scatter.requireVersion(4.0);


        const eosNetwork = {
            protocol: "https",
            blockchain: 'eos',
            host: "jungle2.cryptolions.io",
            port: 443,
            chainId: "e70aaab8997e1dfce58fbfac80cbbb8fecec7b99cf982a9444273cbc64c41473"
        }

        //给用户推荐网络， 第一次需要授权
        //scatter.suggestNetwork(eosNetwork);

        // scatter.getIdentity 用户授权页面
        scatter.getIdentity({accounts: [eosNetwork]}).then(
            identity => {

                //1. 用户授权完成后，获取用户的EOS帐号名字（12位长度），传给后台完成登录or注册操作操作
                const account = identity.accounts.find(acc => acc.blockchain === 'eos');
                console.log("1. 用户授权完成后，获取用户信息，提交给后台完成用户登录or注册", identity);
                //EOS参数，仅签名不广播交易
                const eosOptions = {
                    broadcast: true,
                    chainId: "e70aaab8997e1dfce58fbfac80cbbb8fecec7b99cf982a9444273cbc64c41473"
                }
                //获取EOS instance
                const eos = scatter.eos(eosNetwork, Eos, eosOptions, "http");
                window.eos = eos;
                const requiredFields = {
                    accounts: [eosNetwork],
                }

                const options = {
                    authorization: [
                        `${account.name}@${account.authority}`,
                    ]
                };
                // poll tables/database on EOS chain
                // code: contract name
                // scope: contract in which scope
                var contract_name = "arestest1234";
                var game_table = "game";
                eos.getTableRows({
                    code: contract_name,
                    scope: contract_name,
                    table: game_table,
                    json: true
                }).then(function(res) {
                    console.log(res);
                });
                var waitingpool_table = "users1";
                eos.getTableRows({
                    code: contract_name,
                    scope: contract_name,
                    table: waitingpool_table,
                    json: true
                }).then(function(res) {
                    console.log(res);
                });
                var scheduledpool_table = "users2";
                eos.getTableRows({
                    code: contract_name,
                    scope: contract_name,
                    table: scheduledpool_table,
                    json: true
                }).then(function(res) {
                    console.log(res);
                });
                // call `version` function on the chain
                // no authentication
                eos.contract(contract_name, {requiredFields}).then(
                    contract => {
                        contract.version(options).then(trx => {
                            console.log("2.获取签名后的交易，前端需要将此数据传入后台", trx);
                        }).catch(e => {
                            console.log("error", e);
                            if (e.toString().includes("overdrawn balance")) {
                                alert("No money, go back to Getting Started and refill")
                            }

                        });
                    }
                );
                // *trigger* `enter` function on the chain
                var our_contract_name = "arestest1234";
                var amount = "0.1000 EOS";   /* NOTE: must 4 precision, or error occurs  */
                var memo = "gameuuid:0";     /* memo must be set in such format: "key:val" */
                // key is `gameuuid` and value is the gameuuid a user wants to enter
                eos.contract("eosio.token", {requiredFields}).then(
                    contract => {
                        // transfer(from_user, to_user, quantity);
                        // `from_user` transfers `quantity` TOKENS to `to_user`
                        // `from_user` and `to_user` must be different, or it throws exceptions
                        contract.transfer(account.name, our_contract_name, amount, memo, options).then(trx => {
                            console.log("transfer tokens to our platform", trx);
                        }).catch(e => {
                            console.log("error", e);
                            if (e.toString().includes("overdrawn balance")) {
                                alert("No money, go back to Getting Started and refill")
                            }
                        });
                    }
                );
                // how to call a contract function with parameters
                // for example, there is a function like

                // void dice::toss(eosio::name user, uint64_t gameuuid) { // do some stuffs }
                // we can call it by scatter like the following snippets
                // eos.contract($contract_name, {requiredFields}).then(
                //     contract => {
                //         contract.toss(account.name,    /* first parameter corresponding to `eosio::name user` */
                //                       0,               /* second parameter corresponding to `uint64_t gameuuid` */
                //                       options          /* options contain permission */
                //         ).then(trx => {
                //             console.log("transfer tokens to our platform", trx);
                //             // trx contains transaction id, we can use it to query whether a transaction is successful or not
                //         }).catch(e => {
                //             console.log("error", e);
                //             if (e.toString().includes("overdrawn balance")) {
                //                 alert("No money, go back to Getting Started and refill")
                //             }
                //         });
                //     }
                // );

            }).catch(
                e => {
                    console.log("error", e);
                }
            );
    })
</script>
    </html>
